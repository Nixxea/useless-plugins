(function(l,T,m){"use strict";const u=m.findByProps("sendBotMessage"),D=m.findByProps("setCommunicationDisabledUntil"),b=m.findByProps("getUsers"),h=m.findByProps("canManageUser"),C=m.findByProps("canToggleCommunicationDisableOnUser").canToggleCommunicationDisableOnUser,M=m.findByProps("saveChannel").saveChannel,f=m.findByProps("Permissions").Permissions,{ApplicationCommandOptionType:c,ApplicationCommandType:N}=m.findByProps("ApplicationCommandOptionType"),B=24192e5,S=21600,y={\u0441:1e3,\u043C:6e4,\u0447:36e5,\u0434:864e5,\u043D:6048e5,s:1e3,m:6e4,h:36e5,d:864e5,w:6048e5};function g(e){let n=0;const t=e.matchAll(/((?:\d+\.)?\d+) ?([^\d\s.]+)/g);for(const i of t){const[,s,a]=i;let o;for(const r in y)if(a.startsWith(r)){o=y[r];break}o&&(n+=o*s)}return n||null}function v(e){const n=e.match(/^(?:(\d{1,2})\.(\d{1,2})(?:\.(\d{1,4}))?)?(?:(?:\s|-| Ð² | in )?(\d{1,2}):(\d{1,2})(?::(\d{1,2}))?)?$/);if(!n||!n[0])return null;const t=new Date,i=new Date(1970,0);let[,s,a,o,r,p,d]=n;return i.setFullYear(+o||t.getFullYear()),i.setMonth(+a?a-1:t.getMonth()),i.setDate(+s||t.getDate()),r&&(i.setHours(+r),i.setMinutes(+p),i.setSeconds(+d||0)),i}function w(e){const n=g(e);if(n)return n;const t=v(e);return t?t.getTime()-Date.now():null}var P={commands:[],onLoad(){this.registerCommand({name:"mute",displayName:"mute",description:"Time out member.",displayDescription:"Time out member.",applicationId:"-1",options:[{name:"member",displayName:"member",description:"The member to time out",displayDescription:"The member to time out",required:!0,type:c.USER},{name:"time",displayName:"time",description:"Time out time or date",displayDescription:"Time out time or date",required:!0,type:c.STRING},{name:"reason",displayName:"reason",description:"The reason for time out",displayDescription:"The reason for time out",required:!1,type:c.STRING}],type:1,inputType:1,predicate(e){return h.can(f.MODERATE_MEMBERS,e.guild)},async execute(e,n){const t=e.find(function(d){return d.name==="member"}).value,i=e.find(function(d){return d.name==="time"}).value,s=e.find(function(d){return d.name==="reason"})?.value,a=b.getUser(t);if(!C(n.guild.id,t))return u.sendBotMessage(n.channel.id,"You cannot time out this member.");let o=w(i);if(!o)return u.sendBotMessage(n.channel.id,`Seems like \`${i}\` is not a valid time string.
For example: \`1h30m\` or \`1hour 10m\``);o=Math.min(B,o);const r=(Date.now()+o)/1e3|0;D.setCommunicationDisabledUntil({guildId:n.guild.id,userId:t,communicationDisabledUntilTimestamp:new Date(Date.now()+o).toISOString(),reason:s});const p=`**${(a.discriminator==="0"?a.username:a.tag)||t}** has been timed out for <t:${r}:R>, <t:${r}:d> <t:${r}:T>`;u.sendBotMessage(n.channel.id,p)}}),this.registerCommand({name:"slowmode",displayName:"slowmode",description:"Set slowmode on the channel.",displayDescription:"Set slowmode on the channel.",options:[{name:"time",displayName:"time",description:"Time out time or date",displayDescription:"Time out time or date",required:!0,type:c.STRING},{name:"channel",displayName:"channel",description:"The reason for time out",displayDescription:"The reason for time out",required:!1,type:c.CHANNEL}],type:N.CHAT,predicate(e){return h.can(f.MANAGE_CHANNELS,e.channel)},async execute(e,n){const t=e.find(function(o){return o.name==="channel"})?.value||n.channel.id,i=e.find(function(o){return o.name==="time"}).value;let s=g(i)/1e3|0;if(typeof s!="number")return u.sendBotMessage(n.channel.id,`Seems like \`${i}\` is not a valid time string.
For example: \`1h30m\` or \`1hour 10m\``);s=Math.min(S,s),M(t,{rateLimitPerUser:s});const a=`Slowmode for the channel has been set to \`${s}\` seconds.`;u.sendBotMessage(n.channel.id,a)}})},onUnload(){for(const e of this.commands)e();this.commnads=[]},registerCommand(e){this.commands.push(T.registerCommand(e))}};return l.default=P,Object.defineProperty(l,"__esModule",{value:!0}),l})({},vendetta.commands,vendetta.metro);
