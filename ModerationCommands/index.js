(function(p,D,a){"use strict";const d=a.findByProps("sendBotMessage"),b=a.findByProps("setCommunicationDisabledUntil"),C=a.findByProps("getUsers"),f=a.findByProps("canManageUser"),M=a.findByProps("canToggleCommunicationDisableOnUser").canToggleCommunicationDisableOnUser,N=a.findByProps("saveChannel").saveChannel,y=a.findByProps("Permissions").Permissions,{ApplicationCommandOptionType:u,ApplicationCommandType:B}=a.findByProps("ApplicationCommandOptionType"),S=24192e5,v=21600,g={\u0441:1e3,\u043C:6e4,\u0447:36e5,\u0434:864e5,\u043D:6048e5,s:1e3,m:6e4,h:36e5,d:864e5,w:6048e5};function T(e){let n=0;const t=e.matchAll(/((?:\d+\.)?\d+) ?([^\d\s.]+)/g);for(const i of t){const[,s,r]=i;let o;for(const m in g)if(r.startsWith(m)){o=g[m];break}o&&(n+=o*s)}return n||null}function w(e){const n=e.match(/^(?:(\d{1,2})\.(\d{1,2})(?:\.(\d{1,4}))?)?(?:(?:\s|-| Ð² | in )?(\d{1,2}):(\d{1,2})(?::(\d{1,2}))?)?$/);if(!n||!n[0])return null;const t=new Date,i=new Date(1970,0);let[,s,r,o,m,l,h]=n;return i.setFullYear(+o||t.getFullYear()),i.setMonth(+r?r-1:t.getMonth()),i.setDate(+s||t.getDate()),m&&(i.setHours(+m),i.setMinutes(+l),i.setSeconds(+h||0)),i}function P(e){const n=T(e);if(n)return n;const t=w(e);return t?t.getTime()-Date.now():null}var A={commands:[],onLoad(){this.registerCommand({name:"mute",displayName:"mute",description:"Time out member.",displayDescription:"Time out member.",applicationId:"-1",options:[{name:"member",displayName:"member",description:"The member to time out",displayDescription:"The member to time out",required:!0,type:u.USER},{name:"time",displayName:"time",description:"Time out time or date",displayDescription:"Time out time or date",required:!0,type:u.STRING},{name:"reason",displayName:"reason",description:"The reason for time out",displayDescription:"The reason for time out",required:!1,type:u.STRING}],type:1,inputType:1,predicate(e){return f.can(y.MODERATE_MEMBERS,e.guild)},async execute(e,n){const t=e.find(function(c){return c.name==="member"}).value,i=e.find(function(c){return c.name==="time"}).value,s=e.find(function(c){return c.name==="reason"})?.value,r=C.getUser(t);if(!M(n.guild.id,t))return d.sendBotMessage(n.channel.id,"You cannot time out this member.");let o=P(i);if(!o)return d.sendBotMessage(n.channel.id,`Seems like \`${i}\` is not a valid time string.
For example: \`1h30m\` or \`1hour 10m\``);o=Math.min(S,o);const m=Date.now()+o,l=m/1e3|0;b.setCommunicationDisabledUntil(n.guild.id,t,new Date(m).toISOString(),null,s);const h=`**${r?.tag||t}** has been timed out for <t:${l}:R>, <t:${l}:d> <t:${l}:T>`;d.sendBotMessage(n.channel.id,h)}}),this.registerCommand({name:"slowmode",displayName:"slowmode",description:"Set slowmode on the channel.",displayDescription:"Set slowmode on the channel.",options:[{name:"time",displayName:"time",description:"Time out time or date",displayDescription:"Time out time or date",required:!0,type:u.STRING},{name:"channel",displayName:"channel",description:"The reason for time out",displayDescription:"The reason for time out",required:!1,type:u.CHANNEL}],type:B.CHAT,predicate(e){return f.can(y.MANAGE_CHANNELS,e.channel)},async execute(e,n){const t=e.find(function(o){return o.name==="channel"})?.value||n.channel.id,i=e.find(function(o){return o.name==="time"}).value;let s=T(i)/1e3|0;if(typeof s!="number")return d.sendBotMessage(n.channel.id,`Seems like \`${i}\` is not a valid time string.
For example: \`1h30m\` or \`1hour 10m\``);s=Math.min(v,s),N(t,{rateLimitPerUser:s});const r=`Slowmode for the channel has been set to \`${s}\` seconds.`;d.sendBotMessage(n.channel.id,r)}})},onUnload(){for(const e of this.commands)e();this.commnads=[]},registerCommand(e){this.commands.push(D.registerCommand(e))}};return p.default=A,Object.defineProperty(p,"__esModule",{value:!0}),p})({},vendetta.commands,vendetta.metro);
